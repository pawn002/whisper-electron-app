<mat-card class="transcription-card">
    <mat-card-header>
        <mat-card-title>Audio Transcription</mat-card-title>
        <mat-card-subtitle
            >Upload or select an audio file to transcribe</mat-card-subtitle
        >
    </mat-card-header>

    <mat-card-content>
        <div class="upload-section">
            <button
                mat-raised-button
                color="primary"
                (click)="selectAudioFile()"
            >
                <mat-icon>folder_open</mat-icon>
                Select Audio File
            </button>

            <div *ngIf="selectedFilePath" class="file-info">
                <mat-icon>audiotrack</mat-icon>
                <span>{{ getFileName() }}</span>
                <span
                    class="file-size"
                    *ngIf="selectedFileSize"
                    >{{
                        formatFileSize(selectedFileSize || 0)
                    }}</span
                >
            </div>
        </div>

        <div class="options-section" *ngIf="selectedFilePath">
            <mat-form-field appearance="outline">
                <mat-label>Model</mat-label>
                <mat-select [(value)]="selectedModel">
                    <mat-option
                        *ngFor="let model of availableModels"
                        [value]="model.id"
                    >
                        {{ model.name }}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Language</mat-label>
                <mat-select [(value)]="selectedLanguage">
                    <mat-option value="auto">Auto Detect</mat-option>
                    <mat-option value="en">English</mat-option>
                    <mat-option value="es">Spanish</mat-option>
                    <mat-option value="fr">French</mat-option>
                    <mat-option value="de">German</mat-option>
                </mat-select>
            </mat-form-field>

            <button
                mat-raised-button
                color="accent"
                (click)="startTranscription()"
                [disabled]="isTranscribing"
            >
                <mat-icon>play_arrow</mat-icon>
                Start Transcription
            </button>
        </div>

        <div class="progress-section" *ngIf="isTranscribing">
            <div class="spinner-container">
                <mat-spinner diameter="60" color="accent"></mat-spinner>
            </div>
            <p class="progress-label">Transcribing audio...</p>
        </div>

        <div class="result-section" *ngIf="transcriptionResult">
            <h3>Transcription Result</h3>
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Transcript</mat-label>
                <textarea
                    matInput
                    rows="10"
                    [ngModel]="getTranscriptionText()"
                    (ngModelChange)="setTranscriptionText($event)"
                    placeholder="Transcription will appear here..."
                ></textarea>
            </mat-form-field>

            <div class="result-actions">
                <button mat-button (click)="copyToClipboard()">
                    <mat-icon>content_copy</mat-icon>
                    Copy
                </button>
                <button mat-button (click)="exportTranscript()">
                    <mat-icon>save</mat-icon>
                    Export
                </button>
            </div>
        </div>
    </mat-card-content>
</mat-card>
